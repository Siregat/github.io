<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Jäger Diary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<audio id="forestAudio" loop>
  <source src="forest.mp3" type="audio/mpeg">
</audio>

<body>

<div class="app">

  <div class="header">
    <h1>🦌 Jäger Diary</h1>
    <p class="subtitle">Dark Forest · Liquid Glass</p>
  </div>

  <div class="glass forest-state" id="forestState">
  <div class="forest-icon" id="forestIcon">🌲</div>
  <div class="forest-text" id="forestText">Лес спокоен.</div>
  <div class="forest-voice" id="forestVoice"></div>
  <button class="sound-toggle" id="soundToggle">
  🔈 Лес
</button>

</div>


  <!-- INPUT -->
  <label>🍾 Выбери напиток</label>

<div class="drink-grid" id="drinkGrid">
  <button class="drink-btn active" data-drink="Jäger-style">🦌 Jäger</button>
  <button class="drink-btn" data-drink="Водка">🍸 Водка</button>
  <button class="drink-btn" data-drink="Лимончелла">🍋 Лимончелла</button>
  <button class="drink-btn" data-drink="Соджа">🍶 Соджа</button>
  <button class="drink-btn" data-drink="Вино">🍷 Вино</button>
  <button class="drink-btn" data-drink="Пиво">🍺 Пиво</button>
</div>

<div class="drink-description" id="drinkDescription">
  🦌 Травяной ликёр на основе более чем 50 растений. Часто пьют охлаждённым, небольшими стопками.
</div>


    <label id="amountLabel">🥃 Стопки</label>

<div class="units-control">
  <button class="unit-btn" onclick="changeUnits(-1)">−</button>
  <div class="units-visual" id="unitsVisual"></div>
  <button class="unit-btn" onclick="changeUnits(1)">+</button>
</div>

<div class="units-count">
  Выпито: <span id="unitsCount">0</span>
</div>

    

    <label>🧠 Настроение</label>
    <div class="mood-grid">
      <button class="mood-btn" data-value="1">😵</button>
      <button class="mood-btn" data-value="2">😕</button>
      <button class="mood-btn active" data-value="3">😐</button>
      <button class="mood-btn" data-value="4">🙂</button>
      <button class="mood-btn" data-value="5">😄</button>
    </div>
    <label>📝 Комментарий (необязательно)</label>
<input
  type="text"
  id="dayComment"
  placeholder="друзья, пятница, плохой сон"
/>
    <button class="btn-main" onclick="addEntry()">Добавить запись</button>
    <button  id="undoBtn">
  ⤺ Отменить последнюю запись
</button>

  </div>

  <!-- CALENDAR -->
  <div class="glass tab-screen" id="calendar">
    <div class="calendar-header">
      <button onclick="changeMonth(-1)">◀</button>
      <h2 id="monthTitle"></h2>
      <button onclick="changeMonth(1)">▶</button>
    </div>
    <div class="calendar-grid" id="calendarGrid"></div>
  </div>

  <div class="glass" id="monthSummary">
  <h2>📊 Итоги месяца</h2>

  <div class="summary-item">📅 Дней в месяце: <strong id="sumTotal"></strong></div>
  <div class="summary-item">🍺 Дней с алкоголем: <strong id="sumDrinkDays"></strong></div>
  <div class="summary-item">🌲 Трезвых дней: <strong id="sumSoberDays"></strong></div>

  <div class="summary-item">🥃 Общая нагрузка: <strong id="sumLoad"></strong></div>
  <div class="summary-item">📊 Средняя нагрузка: <strong id="sumAvg"></strong></div>

  <div class="summary-item">😄 Лучший день: <strong id="sumBest"></strong></div>
  <div class="summary-item">💀 Самый тяжёлый день: <strong id="sumWorst"></strong></div>
  <div class="summary-item">🍾 Частый напиток: <strong id="sumDrink"></strong></div>
</div>


  <!-- MOOD -->
  <div class="glass tab-screen hidden" id="mood">
    <h2>📊 Настроение & Алкоголь</h2>
    <canvas id="moodChart"></canvas>
  </div>

  <!-- INSIGHTS -->
<div class="glass tab-screen hidden" id="insights">
  <h2>💡 Советы & факты</h2>

  <div class="insight-card" id="insightCard">
    🦌 Загрузка…
  </div>

  <button class="btn-main" onclick="nextInsight()">
    Дальше →
  </button>
</div>



</div>

<!-- TABS -->
<div class="tab-bar glass">
  <button class="tab-btn active" onclick="openTab('calendar', this)">📅 Календарь</button>
  <button class="tab-btn" onclick="openTab('mood', this)">📊 Настроение</button>
  <button class="tab-btn" onclick="openTab('insights', this)">💡 Советы</button>
</div>

<script src="app.js"></script>

<div class="comment-toast" id="commentToast">
  <div class="comment-toast-text" id="commentToastText"></div>
</div>

<div class="undo-toast" id="undoToast">
  <span>Запись отменена</span>
  <button onclick="restoreLastEntry()">Вернуть</button>
</div>


</body>
</html>
